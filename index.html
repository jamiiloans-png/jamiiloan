<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JamiiLoan - Complete Loan Application</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #3498db;
            --primary-dark: #2980b9;
            --secondary: #2c3e50;
            --light: #f5f7fa;
            --gray: #7f8c8d;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 40px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 28px;
            font-weight: 700;
            color: var(--secondary);
        }

        .logo i {
            color: var(--primary);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            text-decoration: none;
            color: var(--secondary);
            font-weight: 500;
            transition: color 0.3s;
        }

        nav a:hover {
            color: var(--primary);
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
            font-size: 16px;
        }

        .btn:hover {
            background: var(--primary-dark);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #27ae60;
        }

        .btn-warning {
            background: var(--warning);
        }

        .btn-warning:hover {
            background: #e67e22;
        }

        .hero {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 60px;
            gap: 40px;
        }

        .hero-content {
            flex: 1;
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--secondary);
            line-height: 1.2;
        }

        .hero p {
            font-size: 18px;
            margin-bottom: 30px;
            color: var(--gray);
        }

        .hero-image {
            flex: 1;
            display: flex;
            justify-content: center;
        }

        .hero-image img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--secondary);
            font-size: 32px;
        }

        .section-subtitle {
            text-align: center;
            margin-bottom: 40px;
            color: var(--gray);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .application-form {
            background: white;
            border-radius: 10px;
            padding: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 40px;
        }

        .form-section {
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 1px solid #eee;
        }

        .form-section:last-child {
            border-bottom: none;
        }

        .form-section-title {
            font-size: 24px;
            color: var(--secondary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-section-title i {
            color: var(--primary);
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border 0.3s;
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 5px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .upload-container {
            border: 2px dashed var(--primary);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .upload-container:hover {
            background: var(--light);
            border-color: var(--primary-dark);
        }

        .upload-icon {
            font-size: 50px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .upload-text {
            margin-bottom: 15px;
            color: var(--gray);
        }

        .upload-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .upload-btn:hover {
            background: var(--primary-dark);
        }

        #file-input, #id-file-input {
            display: none;
        }

        .preview-container {
            display: none;
            margin-top: 20px;
            text-align: center;
        }

        .preview-title {
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .preview-image {
            max-width: 300px;
            max-height: 200px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin: 0 auto 15px;
        }

        .loan-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .loan-option {
            background: var(--light);
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .loan-option:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        .loan-option.selected {
            border-color: var(--primary);
            background: rgba(52, 152, 219, 0.1);
        }

        .loan-amount {
            font-size: 20px;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .loan-duration {
            font-size: 14px;
            color: var(--gray);
        }

        .loan-details {
            background: var(--light);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .loan-detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .loan-detail-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
            font-weight: 700;
            font-size: 18px;
        }

        .payment-info {
            background: #fff9e6;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .payment-info h4 {
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .payment-info h4 i {
            color: var(--warning);
        }

        .payment-details {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
        }

        .payment-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .payment-item:last-child {
            margin-bottom: 0;
            font-weight: 700;
            color: var(--secondary);
        }

        .confirmation-box {
            margin-top: 20px;
        }

        .confirmation-box textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            min-height: 120px;
            resize: vertical;
        }

        .confirmation-box textarea:focus {
            border-color: var(--primary);
            outline: none;
        }

        .application-summary {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-top: 40px;
            display: none;
        }

        .summary-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--secondary);
        }

        .summary-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .summary-images {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .summary-image-container {
            text-align: center;
        }

        .summary-image-container h4 {
            margin-bottom: 10px;
            color: var(--secondary);
        }

        .summary-image {
            max-width: 100%;
            max-height: 150px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .summary-details {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .summary-item {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            padding-bottom: 10px;
            border-bottom: 1px solid #f0f0f0;
        }

        .summary-item:last-child {
            border-bottom: none;
            font-weight: 700;
            font-size: 18px;
            color: var(--secondary);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .feature-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 40px;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .feature-title {
            margin-bottom: 15px;
            color: var(--secondary);
        }

        footer {
            text-align: center;
            padding: 30px 0;
            color: var(--gray);
            border-top: 1px solid #eaeaea;
            margin-top: 40px;
        }

        .form-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            .hero {
                flex-direction: column;
            }
            
            nav ul {
                display: none;
            }
            
            .hero h1 {
                font-size: 36px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .summary-content {
                grid-template-columns: 1fr;
            }
            
            .summary-images {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-hand-holding-usd"></i>
                <span>LoanUp</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Loans</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
            <button class="btn">Sign In</button>
        </header>

        <section class="hero">
            <div class="hero-content">
                <h1>Fast & Easy Loans with JamiiLoan</h1>
                <p>Complete your loan application in minutes. Upload required documents, select your loan amount, and get approved quickly.</p>
                <button class="btn">Apply Now</button>
            </div>
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="Loan Application">
            </div>
        </section>

        <h2 class="section-title">Complete Your Loan Application</h2>
        <p class="section-subtitle">Fill in your personal details, upload required documents, select your loan, and complete payment to submit your application.</p>

        <form class="application-form" id="loan-form">
            <!-- Personal Details Section -->
            <div class="form-section">
                <h3 class="form-section-title">
                    <i class="fas fa-user"></i>
                    Personal Details
                </h3>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="first-name">First Name</label>
                        <input type="text" id="first-name" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="last-name">Last Name</label>
                        <input type="text" id="last-name" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Gender</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="male" name="gender" value="male" required>
                                <label for="male">Male</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="female" name="gender" value="female">
                                <label for="female">Female</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="other" name="gender" value="other">
                                <label for="other">Other</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="nationality">Nationality</label>
                        <select id="nationality" class="form-control" required>
                            <option value="">Select Nationality</option>
                            <option value="kenyan">Kenyan</option>
                            <option value="ugandan">Ugandan</option>
                            <option value="tanzanian">Tanzanian</option>
                            <option value="rwandan">Rwandan</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="income-source">Source of Income</label>
                        <select id="income-source" class="form-control" required>
                            <option value="">Select Income Source</option>
                            <option value="employment">Employment</option>
                            <option value="business">Business</option>
                            <option value="freelance">Freelance</option>
                            <option value="investments">Investments</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="monthly-income">Monthly Income (KES)</label>
                        <input type="number" id="monthly-income" class="form-control" min="0" required>
                    </div>
                </div>
            </div>
            
            <!-- Document Upload Section -->
            <div class="form-section">
                <h3 class="form-section-title">
                    <i class="fas fa-file-upload"></i>
                    Document Upload
                </h3>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>Upload Your Photo</label>
                        <div class="upload-container" id="photo-upload-area">
                            <div class="upload-icon">
                                <i class="fas fa-camera"></i>
                            </div>
                            <p class="upload-text">Drag & drop your photo here or click to browse</p>
                            <input type="file" id="photo-file-input" accept="image/*">
                            <button type="button" class="upload-btn" id="photo-browse-btn">Browse Files</button>
                        </div>
                        
                        <div class="preview-container" id="photo-preview-container">
                            <h4 class="preview-title">Photo Preview</h4>
                            <img id="photo-preview" src="" alt="Photo Preview" class="preview-image">
                            <button type="button" class="btn" id="remove-photo-btn">Remove Photo</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Upload ID Document</label>
                        <div class="upload-container" id="id-upload-area">
                            <div class="upload-icon">
                                <i class="fas fa-id-card"></i>
                            </div>
                            <p class="upload-text">Drag & drop your ID here or click to browse</p>
                            <input type="file" id="id-file-input" accept="image/*,.pdf">
                            <button type="button" class="upload-btn" id="id-browse-btn">Browse Files</button>
                        </div>
                        
                        <div class="preview-container" id="id-preview-container">
                            <h4 class="preview-title">ID Preview</h4>
                            <img id="id-preview" src="" alt="ID Preview" class="preview-image">
                            <button type="button" class="btn" id="remove-id-btn">Remove ID</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Loan Selection Section -->
            <div class="form-section">
                <h3 class="form-section-title">
                    <i class="fas fa-money-bill-wave"></i>
                    Loan Selection
                </h3>
                
                <div class="loan-options" id="loan-options">
                    <!-- Loan options will be generated by JavaScript -->
                </div>
                
                <div class="loan-details" id="loan-details">
                    <h4>Loan Details</h4>
                    <div class="loan-detail-item">
                        <span>Loan Amount:</span>
                        <span id="detail-amount">KES 0</span>
                    </div>
                    <div class="loan-detail-item">
                        <span>Duration:</span>
                        <span id="detail-duration">0 days</span>
                    </div>
                    <div class="loan-detail-item">
                        <span>Interest Rate:</span>
                        <span id="detail-interest">0%</span>
                    </div>
                    <div class="loan-detail-item">
                        <span>Processing Fee:</span>
                        <span id="detail-fee">KES 0</span>
                    </div>
                    <div class="loan-detail-item">
                        <span>Total Repayable:</span>
                        <span id="detail-total">KES 0</span>
                    </div>
                </div>
            </div>
            
            <!-- Payment Section -->
            <div class="form-section">
                <h3 class="form-section-title">
                    <i class="fas fa-credit-card"></i>
                    Payment Information
                </h3>
                
                <div class="payment-info">
                    <h4><i class="fas fa-info-circle"></i> Payment Instructions</h4>
                    <p>To complete your application, please pay the processing fee using the details below:</p>
                    
                    <div class="payment-details">
                        <div class="payment-item">
                            <span>Payment Method:</span>
                            <span>M-Pesa</span>
                        </div>
                        <div class="payment-item">
                            <span>Till Number:</span>
                            <span><strong>4164978</strong></span>
                        </div>
                        <div class="payment-item">
                            <span>Amount:</span>
                            <span id="payment-amount">KES 0</span>
                        </div>
                        <div class="payment-item">
                            <span>LoanUp Processing</span>
                        </div>
                    </div>
                </div>
                
                <div class="confirmation-box">
                    <label for="payment-confirmation">Paste M-Pesa Confirmation Message Here</label>
                    <textarea id="payment-confirmation" placeholder="Paste the complete M-Pesa confirmation message you received after payment..."></textarea>
                </div>
            </div>
            
            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-warning" id="preview-btn">Preview Application</button>
                <button type="submit" class="btn btn-success" id="submit-btn" disabled>Submit Application</button>
            </div>
        </form>

        <!-- Application Summary -->
        <div class="application-summary" id="application-summary">
            <h3 class="summary-title">Application Summary</h3>
            <div class="summary-content">
                <div class="summary-images">
                    <div class="summary-image-container">
                        <h4>Your Photo</h4>
                        <img id="summary-photo" src="" alt="Applicant Photo" class="summary-image">
                    </div>
                    <div class="summary-image-container">
                        <h4>ID Document</h4>
                        <img id="summary-id" src="" alt="ID Document" class="summary-image">
                    </div>
                </div>
                <div class="summary-details">
                    <div class="summary-item">
                        <span>Name:</span>
                        <span id="summary-name">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Email:</span>
                        <span id="summary-email">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Phone:</span>
                        <span id="summary-phone">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Gender:</span>
                        <span id="summary-gender">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Nationality:</span>
                        <span id="summary-nationality">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Income Source:</span>
                        <span id="summary-income-source">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Monthly Income:</span>
                        <span id="summary-monthly-income">-</span>
                    </div>
                    <div class="summary-item">
                        <span>Loan Amount:</span>
                        <span id="summary-loan-amount">KES 0</span>
                    </div>
                    <div class="summary-item">
                        <span>Duration:</span>
                        <span id="summary-duration">0 days</span>
                    </div>
                    <div class="summary-item">
                        <span>Total Repayable:</span>
                        <span id="summary-total">KES 0</span>
                    </div>
                </div>
            </div>
        </div>

        <section class="features">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h3 class="feature-title">Fast Approval</h3>
                <p>Get your loan approved in as little as 24 hours with our streamlined process.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3 class="feature-title">Secure & Safe</h3>
                <p>Your personal information and documents are protected with bank-level security.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <h3 class="feature-title">Low Rates</h3>
                <p>Competitive interest rates that fit your budget and financial goals.</p>
            </div>
        </section>

        <footer>
            <p>&copy; 2023 JamiiLoan. All rights reserved.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const loanForm = document.getElementById('loan-form');
            const photoFileInput = document.getElementById('photo-file-input');
            const photoBrowseBtn = document.getElementById('photo-browse-btn');
            const photoUploadArea = document.getElementById('photo-upload-area');
            const photoPreviewContainer = document.getElementById('photo-preview-container');
            const photoPreview = document.getElementById('photo-preview');
            const removePhotoBtn = document.getElementById('remove-photo-btn');
            
            const idFileInput = document.getElementById('id-file-input');
            const idBrowseBtn = document.getElementById('id-browse-btn');
            const idUploadArea = document.getElementById('id-upload-area');
            const idPreviewContainer = document.getElementById('id-preview-container');
            const idPreview = document.getElementById('id-preview');
            const removeIdBtn = document.getElementById('remove-id-btn');
            
            const loanOptionsContainer = document.getElementById('loan-options');
            const loanDetails = document.getElementById('loan-details');
            const paymentAmount = document.getElementById('payment-amount');
            const paymentConfirmation = document.getElementById('payment-confirmation');
            const previewBtn = document.getElementById('preview-btn');
            const submitBtn = document.getElementById('submit-btn');
            const applicationSummary = document.getElementById('application-summary');
            
            // Loan data - amounts from KES 1,000 to 80,000
            const loanOptions = [
                { amount: 1000, duration: '7 days', interest: 5, fee: 50 },
                { amount: 2000, duration: '14 days', interest: 7, fee: 100 },
                { amount: 3000, duration: '14 days', interest: 7, fee: 150 },
                { amount: 5000, duration: '30 days', interest: 10, fee: 200 },
                { amount: 7000, duration: '30 days', interest: 10, fee: 250 },
                { amount: 10000, duration: '30 days', interest: 12, fee: 300 },
                { amount: 15000, duration: '60 days', interest: 15, fee: 400 },
                { amount: 20000, duration: '60 days', interest: 15, fee: 500 },
                { amount: 30000, duration: '90 days', interest: 18, fee: 700 },
                { amount: 40000, duration: '90 days', interest: 18, fee: 900 },
                { amount: 50000, duration: '120 days', interest: 20, fee: 1000 },
                { amount: 60000, duration: '120 days', interest: 20, fee: 1200 },
                { amount: 70000, duration: '120 days', interest: 20, fee: 1400 },
                { amount: 80000, duration: '120 days', interest: 20, fee: 1600 }
            ];
            
            let selectedLoan = null;
            let uploadedPhoto = null;
            let uploadedId = null;
            
            // Generate loan options
            function generateLoanOptions() {
                loanOptionsContainer.innerHTML = '';
                
                loanOptions.forEach(loan => {
                    const loanElement = document.createElement('div');
                    loanElement.className = 'loan-option';
                    loanElement.innerHTML = `
                        <div class="loan-amount">KES ${loan.amount.toLocaleString()}</div>
                        <div class="loan-duration">${loan.duration}</div>
                    `;
                    
                    loanElement.addEventListener('click', () => selectLoan(loan));
                    
                    loanOptionsContainer.appendChild(loanElement);
                });
            }
            
            // Select loan option
            function selectLoan(loan) {
                selectedLoan = loan;
                
                // Remove selected class from all options
                document.querySelectorAll('.loan-option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Add selected class to clicked option
                event.target.closest('.loan-option').classList.add('selected');
                
                // Update loan details
                document.getElementById('detail-amount').textContent = `KES ${loan.amount.toLocaleString()}`;
                document.getElementById('detail-duration').textContent = loan.duration;
                document.getElementById('detail-interest').textContent = `${loan.interest}%`;
                document.getElementById('detail-fee').textContent = `KES ${loan.fee}`;
                
                const total = loan.amount + (loan.amount * loan.interest / 100) + loan.fee;
                document.getElementById('detail-total').textContent = `KES ${Math.round(total).toLocaleString()}`;
                
                // Update payment amount
                paymentAmount.textContent = `KES ${loan.fee}`;
                
                // Show loan details
                loanDetails.style.display = 'block';
                
                // Enable submit button if all requirements are met
                checkFormCompletion();
            }
            
            // Handle photo upload
            function setupPhotoUpload() {
                // Open file browser when browse button is clicked
                photoBrowseBtn.addEventListener('click', function() {
                    photoFileInput.click();
                });
                
                // Open file browser when upload area is clicked
                photoUploadArea.addEventListener('click', function() {
                    photoFileInput.click();
                });
                
                // Handle file selection
                photoFileInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    handleFileUpload(file, 'photo');
                });
                
                // Handle drag and drop for photo
                setupDragAndDrop(photoUploadArea, 'photo');
                
                // Remove photo
                removePhotoBtn.addEventListener('click', function() {
                    photoFileInput.value = '';
                    photoPreviewContainer.style.display = 'none';
                    photoUploadArea.style.display = 'block';
                    uploadedPhoto = null;
                    checkFormCompletion();
                });
            }
            
            // Handle ID upload
            function setupIdUpload() {
                // Open file browser when browse button is clicked
                idBrowseBtn.addEventListener('click', function() {
                    idFileInput.click();
                });
                
                // Open file browser when upload area is clicked
                idUploadArea.addEventListener('click', function() {
                    idFileInput.click();
                });
                
                // Handle file selection
                idFileInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    handleFileUpload(file, 'id');
                });
                
                // Handle drag and drop for ID
                setupDragAndDrop(idUploadArea, 'id');
                
                // Remove ID
                removeIdBtn.addEventListener('click', function() {
                    idFileInput.value = '';
                    idPreviewContainer.style.display = 'none';
                    idUploadArea.style.display = 'block';
                    uploadedId = null;
                    checkFormCompletion();
                });
            }
            
            // Setup drag and drop for upload areas
            function setupDragAndDrop(uploadArea, type) {
                uploadArea.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    uploadArea.style.background = 'var(--light)';
                    uploadArea.style.borderColor = 'var(--primary-dark)';
                });
                
                uploadArea.addEventListener('dragleave', function() {
                    uploadArea.style.background = '';
                    uploadArea.style.borderColor = 'var(--primary)';
                });
                
                uploadArea.addEventListener('drop', function(e) {
                    e.preventDefault();
                    uploadArea.style.background = '';
                    uploadArea.style.borderColor = 'var(--primary)';
                    
                    const file = e.dataTransfer.files[0];
                    handleFileUpload(file, type);
                });
            }
            
            // Handle file upload
            function handleFileUpload(file, type) {
                if (file) {
                    if (file.type.startsWith('image/') || (type === 'id' && file.type === 'application/pdf')) {
                        const reader = new FileReader();
                        
                        reader.onload = function(e) {
                            if (type === 'photo') {
                                photoPreview.src = e.target.result;
                                photoPreviewContainer.style.display = 'block';
                                photoUploadArea.style.display = 'none';
                                uploadedPhoto = e.target.result;
                            } else {
                                // For ID, we'll just show a placeholder for PDFs
                                if (file.type === 'application/pdf') {
                                    idPreview.src = 'https://cdn-icons-png.flaticon.com/512/337/337946.png';
                                    idPreview.alt = 'PDF Document';
                                } else {
                                    idPreview.src = e.target.result;
                                }
                                idPreviewContainer.style.display = 'block';
                                idUploadArea.style.display = 'none';
                                uploadedId = e.target.result;
                            }
                            
                            checkFormCompletion();
                        };
                        
                        reader.readAsDataURL(file);
                    } else {
                        alert('Please select a valid image file (JPEG, PNG, etc.) or PDF for ID.');
                    }
                }
            }
            
            // Check if form is complete
            function checkFormCompletion() {
                const firstName = document.getElementById('first-name').value;
                const lastName = document.getElementById('last-name').value;
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                const gender = document.querySelector('input[name="gender"]:checked');
                const nationality = document.getElementById('nationality').value;
                const incomeSource = document.getElementById('income-source').value;
                const monthlyIncome = document.getElementById('monthly-income').value;
                const paymentConfirm = paymentConfirmation.value.trim();
                
                const isPersonalDetailsComplete = firstName && lastName && email && phone && gender && nationality && incomeSource && monthlyIncome;
                const isDocumentsUploaded = uploadedPhoto && uploadedId;
                const isLoanSelected = selectedLoan !== null;
                const isPaymentConfirmed = paymentConfirm.length > 0;
                
                if (isPersonalDetailsComplete && isDocumentsUploaded && isLoanSelected && isPaymentConfirmed) {
                    submitBtn.disabled = false;
                } else {
                    submitBtn.disabled = true;
                }
            }
            
            // Update application summary
            function updateApplicationSummary() {
                const firstName = document.getElementById('first-name').value;
                const lastName = document.getElementById('last-name').value;
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                const gender = document.querySelector('input[name="gender"]:checked');
                const nationality = document.getElementById('nationality').value;
                const incomeSource = document.getElementById('income-source').value;
                const monthlyIncome = document.getElementById('monthly-income').value;
                
                document.getElementById('summary-name').textContent = `${firstName} ${lastName}`;
                document.getElementById('summary-email').textContent = email;
                document.getElementById('summary-phone').textContent = phone;
                document.getElementById('summary-gender').textContent = gender ? gender.value : '-';
                document.getElementById('summary-nationality').textContent = nationality;
                document.getElementById('summary-income-source').textContent = incomeSource;
                document.getElementById('summary-monthly-income').textContent = `KES ${monthlyIncome}`;
                
                if (selectedLoan) {
                    document.getElementById('summary-loan-amount').textContent = `KES ${selectedLoan.amount.toLocaleString()}`;
                    document.getElementById('summary-duration').textContent = selectedLoan.duration;
                    
                    const total = selectedLoan.amount + (selectedLoan.amount * selectedLoan.interest / 100) + selectedLoan.fee;
                    document.getElementById('summary-total').textContent = `KES ${Math.round(total).toLocaleString()}`;
                }
                
                if (uploadedPhoto) {
                    document.getElementById('summary-photo').src = uploadedPhoto;
                }
                
                if (uploadedId) {
                    document.getElementById('summary-id').src = uploadedId;
                }
                
                applicationSummary.style.display = 'block';
                applicationSummary.scrollIntoView({ behavior: 'smooth' });
            }
            
            // Event listeners for form validation
            const formInputs = document.querySelectorAll('.form-control, input[type="radio"], input[type="number"]');
            formInputs.forEach(input => {
                input.addEventListener('input', checkFormCompletion);
                input.addEventListener('change', checkFormCompletion);
            });
            
            paymentConfirmation.addEventListener('input', checkFormCompletion);
            
            // Preview application
            previewBtn.addEventListener('click', function() {
                updateApplicationSummary();
            });
            
            // Handle form submission
            loanForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!submitBtn.disabled) {
                    // In a real application, you would send the data to a server here
                    alert('Your loan application has been submitted successfully! We will review your information and get back to you within 24 hours.');
                    
                    // Reset the form
                    loanForm.reset();
                    photoFileInput.value = '';
                    idFileInput.value = '';
                    photoPreviewContainer.style.display = 'none';
                    photoUploadArea.style.display = 'block';
                    idPreviewContainer.style.display = 'none';
                    idUploadArea.style.display = 'block';
                    loanDetails.style.display = 'none';
                    applicationSummary.style.display = 'none';
                    submitBtn.disabled = true;
                    
                    document.querySelectorAll('.loan-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    
                    selectedLoan = null;
                    uploadedPhoto = null;
                    uploadedId = null;
                }
            });
            
            // Initialize the page
            generateLoanOptions();
            setupPhotoUpload();
            setupIdUpload();
        });
    </script>
</body>
</html>